<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.1.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta name="google-site-verification" content="bzZtQTbSAJGrkq97ZYmZLMazo8HfoVPpqj8aDEPrObA"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"sourcelizi.github.io",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!1,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="这里的安装步骤大部分参考Part-DB installation guide for Debian 11转换为Windows下的安装 系统环境Windows Server 2012R2 With Update，需要下载的文件包括  已经编译好的PartDB：下载Assets中的Full.Part-DB.including.dependencies.and.built.assets.zip php-"><meta property="og:type" content="article"><meta property="og:title" content="在Windows原生部署PartDB库存管理"><meta property="og:url" content="https://sourcelizi.github.io/202406/partdb4windows/index.html"><meta property="og:site_name" content="搬砖笔记"><meta property="og:description" content="这里的安装步骤大部分参考Part-DB installation guide for Debian 11转换为Windows下的安装 系统环境Windows Server 2012R2 With Update，需要下载的文件包括  已经编译好的PartDB：下载Assets中的Full.Part-DB.including.dependencies.and.built.assets.zip php-"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://sourcelizi.github.io/images/partdb-ins/iis.png"><meta property="og:image" content="https://sourcelizi.github.io/images/partdb-ins/iis-php.png"><meta property="og:image" content="https://sourcelizi.github.io/images/partdb-ins/php-ext.png"><meta property="og:image" content="https://sourcelizi.github.io/images/partdb-ins/php-tmp.png"><meta property="og:image" content="https://sourcelizi.github.io/images/partdb-ins/site-php.png"><meta property="og:image" content="https://sourcelizi.github.io/images/partdb-ins/url-rewrite.png"><meta property="article:published_time" content="2024-06-30T09:37:07.000Z"><meta property="article:modified_time" content="2024-06-30T09:37:07.000Z"><meta property="article:author" content="SourceLizi"><meta property="article:tag" content="Windows"><meta property="article:tag" content="Guide"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://sourcelizi.github.io/images/partdb-ins/iis.png"><link rel="canonical" href="https://sourcelizi.github.io/202406/partdb4windows/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>在Windows原生部署PartDB库存管理 | 搬砖笔记</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?9c258aa589420c0e156b993f11f38971";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">搬砖笔记</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">SourceLizi's Blog</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-guestbook"><a href="/guestbook/" rel="section"><i class="fa fa-comment fa-fw"></i>留言板</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://sourcelizi.github.io/202406/partdb4windows/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="SourceLizi"><meta itemprop="description" content="SourceLizi's Blog"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="搬砖笔记"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">在Windows原生部署PartDB库存管理</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2024-06-30 17:37:07" itemprop="dateCreated datePublished" datetime="2024-06-30T17:37:07+08:00">2024-06-30</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Software/" itemprop="url" rel="index"><span itemprop="name">Software</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>这里的安装步骤大部分参考<a target="_blank" rel="noopener" href="https://docs.part-db.de/installation/installation_guide-debian.html">Part-DB installation guide for Debian 11</a>转换为Windows下的安装</p><h2 id="系统环境"><a href="#系统环境" class="headerlink" title="系统环境"></a>系统环境</h2><p>Windows Server 2012R2 With Update，需要下载的文件包括</p><ul><li><a target="_blank" rel="noopener" href="https://github.com/Part-DB/Part-DB-server/releases">已经编译好的PartDB</a>：下载Assets中的Full.Part-DB.including.dependencies.and.built.assets.zip</li><li><a target="_blank" rel="noopener" href="https://windows.php.net/downloads/releases/archives/php-8.3.8-Win32-vs16-x64.zip">php-8.3.8</a></li><li><a target="_blank" rel="noopener" href="https://getcomposer.org/Composer-Setup.exe">Composer</a></li><li><a target="_blank" rel="noopener" href="https://github.com/phpmanager/phpmanager/releases/download/v2.12/PHPManagerForIIS_x64.msi">PHP Manager for IIS</a></li><li><a target="_blank" rel="noopener" href="https://www.iis.net/downloads/microsoft/url-rewrite">URL Rewrite</a>：URL重写插件，<a target="_blank" rel="noopener" href="https://download.microsoft.com/download/1/2/8/128E2E22-C1B9-44A4-BE2A-5859ED1D4592/rewrite_amd64_zh-CN.msi">下载页面</a></li></ul><h2 id="PHP环境配置"><a href="#PHP环境配置" class="headerlink" title="PHP环境配置"></a>PHP环境配置</h2><h3 id="IIS安装"><a href="#IIS安装" class="headerlink" title="IIS安装"></a>IIS安装</h3><p>首先需要配置Windows增加IIS作为HTTP服务器。在服务器管理器中选择“添加角色和功能”，在左侧列表中直接选择“服务器角色”，在“Web服务器”中选择以下必须功能进行安装<br><img src="/images/partdb-ins/iis.png"></p><ul><li>“安全性”-选择“请求筛选”</li><li>“常见HTTP功能”一栏下全选</li><li>“应用程序开发”一栏下选择<strong>“CGI”</strong>，“服务器端包含”，“应用程序初始化”</li><li>“管理工具”一栏下除“管理服务”全选<br>最后选择安装，等待安装完成。安装完成后打开localhost应该可以看到一个有效的欢迎页面，此时IIS安装成功</li></ul><h3 id="PHP安装与配置"><a href="#PHP安装与配置" class="headerlink" title="PHP安装与配置"></a>PHP安装与配置</h3><p>将上述下载的php-8.3.8压缩包解压到<code>C:\Program Files\php-8.3.8</code>，将<code>C:\Program Files\php-8.3.8\php.exe</code>添加到环境变量中，并且安装好上面下载的PHP Manager for IIS、Composer以及URL Rewrite，在IIS里面找到PHP管理器<br>打开后选择“注册新PHP版本”，选择刚才解压到的文件里的<code>php-cgi.exe</code>文件即<code>C:\Program Files\php-8.3.8\php-cgi.exe</code></p><p><img src="/images/partdb-ins/iis-php.png"></p><p>配置完成后应该可以看到PHP的版本号，同时选择“检查phpinfo()”应该能够看到PHP的信息页面。确认PHP正常配置后在PHP管理器内打开“PHP扩展”，参考官方配置需要启用如下扩展</p><p><img src="/images/partdb-ins/php-ext.png"></p><p>另外还需要在PHP管理器内打开“PHP设置”，在PHP一节下增加一个指定的可以写入的缓存目录<code>sys_temp_dir</code>，这里可以指定<code>&quot;C:\Windows\Temp&quot;</code>作为缓存目录，否则在后面切可能会报错</p><p><img src="/images/partdb-ins/php-tmp.png"></p><h2 id="PartDB配置"><a href="#PartDB配置" class="headerlink" title="PartDB配置"></a>PartDB配置</h2><p>首先需要配置网站，选择系统新建的“Default Web Site”，在中间窗口选择“处理程序映射”双击，然后最右边选择“添加模块映射”，按照下图进行配置</p><p><img src="/images/partdb-ins/site-php.png"></p><p>将上面下载好的已经编译好的PartDB解压到某个位置，这里选择默认的网站根目录<code>C:\inetpub\wwwroot</code>，在网站的IIS配置右侧选择“基本设置”，将物理路径设置为解压文件中的<code>public</code>目录，也即<code>C:\inetpub\wwwroot\public</code>，点确定。 另外还需要配置目录重写，在安装好URL Rewrite后在网站的配置页面打开URL重写，并增加如下配置</p><p><img src="/images/partdb-ins/url-rewrite.png"></p><p>上述配置完成后，重启IIS服务器。<br>在启动PartDB前还需要增加配置文件，将根目录下的<code>.env</code>文件复制一份并命名为<code>.env.local</code>，修改文件中的语言、时间以及货币为本地内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># The language to use serverwide as default (en, de, ru, etc.)</span><br><span class="line">DEFAULT_LANG=&quot;zh&quot;</span><br><span class="line"># The default timezone to use serverwide (e.g. Europe/Berlin)</span><br><span class="line">DEFAULT_TIMEZONE=&quot;Asia/Hong_Kong&quot;</span><br><span class="line"># The currency that is used inside the DB (and is assumed when no currency is set). This can not be changed later, so be sure to set it the currency used in your country</span><br><span class="line">BASE_CURRENCY=&quot;CNY&quot;</span><br></pre></td></tr></table></figure><p>其他自定义配置参考<a target="_blank" rel="noopener" href="https://docs.part-db.de/configuration.html">官方的文档</a><br>接下来在解压出的目录下先执行命令<code>php bin/console partdb:check-requirements</code>检查上述配置是否已经有效，最后执行<code>php bin/console doctrine:migrations:migrate</code>创建PartDB数据库。这个时候打开localhost应该可以正常浏览PartDB的页面了</p></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Windows/" rel="tag"><i class="fa fa-tag"></i> Windows</a> <a href="/tags/Guide/" rel="tag"><i class="fa fa-tag"></i> Guide</a></div><div class="post-nav"><div class="post-nav-item"><a href="/202406/onnx-deploy/" rel="prev" title="ONNX模型使用与多环境部署"><i class="fa fa-chevron-left"></i> ONNX模型使用与多环境部署</a></div><div class="post-nav-item"><a href="/202407/ml-basic/" rel="next" title="机器学习的基础模型与算法">机器学习的基础模型与算法 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script src="https://utteranc.es/client.js" repo="SourceLizi/sourcelizi.github.io" issue-term="pathname" label="utterances" theme="github-light" crossorigin="anonymous" async></script><script>window.addEventListener("tabs:register",()=>{let{activeClass:t}=CONFIG.comments;if(CONFIG.comments.storage&&(t=localStorage.getItem("comments_active")||t),t){let e=document.querySelector(`a[href="#comment-${t}"]`);e&&e.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{if(!t.target.matches(".tabs-comment .tab-content .tab-pane"))return;let e=t.target.classList[1];localStorage.setItem("comments_active",e)})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83"><span class="nav-number">1.</span> <span class="nav-text">系统环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PHP%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="nav-number">2.</span> <span class="nav-text">PHP环境配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#IIS%E5%AE%89%E8%A3%85"><span class="nav-number">2.1.</span> <span class="nav-text">IIS安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PHP%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="nav-number">2.2.</span> <span class="nav-text">PHP安装与配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PartDB%E9%85%8D%E7%BD%AE"><span class="nav-number">3.</span> <span class="nav-text">PartDB配置</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="SourceLizi" src="/images/avatar.png"><p class="site-author-name" itemprop="name">SourceLizi</p><div class="site-description" itemprop="description">SourceLizi's Blog</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">60</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">12</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">23</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/SourceLizi" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;SourceLizi" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:lizi_bussiness@outlook.com" title="E-Mail → mailto:lizi_bussiness@outlook.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2019 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i></i> </span><span class="author" itemprop="copyrightHolder">SourceLizi</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 驱动</div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/js/utils.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script><script>var options={bottom:"32px",right:"uset",left:"32px",time:"0.3s",mixColor:"transparent",backgroundColor:"transparent",buttonColorDark:"#100f2c",buttonColorLight:"#fff",saveInCookies:!0,label:"🌓",autoMatchOsTheme:!0};const darkmode=new Darkmode(options);window.darkmode=darkmode,darkmode.showWidget()</script></body></html>